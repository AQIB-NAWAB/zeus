{"version":3,"names":["debug","LogLevel","Logger","constructor","levelToOutput","namespace","_defineProperty","message","args","_log","info","warn","error","_levelToOutput","_logger","fromEnv","level","none","prefix","Object","keys","reduce","prev","curr","log","grpcLog","actionLog"],"sources":["log.ts"],"sourcesContent":["import debug, { Debugger } from 'debug';\n\nexport enum LogLevel {\n    debug = 1,\n    info = 2,\n    warn = 3,\n    error = 4,\n    none = 5\n}\n\n/**\n * A logger class with support for multiple namespaces and log levels.\n */\nexport class Logger {\n    private _levelToOutput: LogLevel;\n    private _logger: Debugger;\n\n    constructor(levelToOutput: LogLevel, namespace: string) {\n        this._levelToOutput = levelToOutput;\n        this._logger = debug(namespace);\n    }\n\n    /**\n     * creates a new Logger instance by inspecting the executing environment\n     */\n    static fromEnv(namespace: string): Logger {\n        // by default, log nothing (assuming prod)\n        const level = LogLevel.none;\n        return new Logger(level, namespace);\n    }\n\n    /**\n     * log a debug message\n     */\n    debug = (message: string, ...args: any[]) =>\n        this._log(LogLevel.debug, message, args);\n\n    /**\n     * log an info message\n     */\n    info = (message: string, ...args: any[]) =>\n        this._log(LogLevel.info, message, args);\n\n    /**\n     * log a warn message\n     */\n    warn = (message: string, ...args: any[]) =>\n        this._log(LogLevel.warn, message, args);\n\n    /**\n     * log an error message\n     */\n    error = (message: string, ...args: any[]) =>\n        this._log(LogLevel.error, message, args);\n\n    /**\n     * A shared logging function which will only output logs based on the level of this Logger instance\n     * @param level the level of the message being logged\n     * @param message the message to log\n     * @param args optional additional arguments to log\n     */\n    private _log(level: LogLevel, message: string, args: any[]) {\n        // don't log if the level to output is greater than the level of this message\n        if (this._levelToOutput > level) return;\n\n        // convert the provided log level number to the string name\n        const prefix = Object.keys(LogLevel).reduce(\n            (prev, curr) =>\n                level === LogLevel[curr as keyof typeof LogLevel] ? curr : prev,\n            '??'\n        );\n\n        this._logger(`[${prefix}] ${message}`, ...args);\n    }\n}\n\n/**\n * the main logger for the app\n */\nexport const log = Logger.fromEnv('main');\n\n/**\n * the logger for GRPC requests and responses\n */\nexport const grpcLog = Logger.fromEnv('grpc');\n\n/**\n * the logger for state updates via mobx actions\n */\nexport const actionLog = Logger.fromEnv('action');\n"],"mappings":";;;AAAA,OAAOA,KAAK,MAAoB,OAAO;AAEvC,WAAYC,QAAQ,0BAARA,QAAQ;EAARA,QAAQ,CAARA,QAAQ;EAARA,QAAQ,CAARA,QAAQ;EAARA,QAAQ,CAARA,QAAQ;EAARA,QAAQ,CAARA,QAAQ;EAARA,QAAQ,CAARA,QAAQ;EAAA,OAARA,QAAQ;AAAA;;AAQpB;AACA;AACA;AACA,OAAO,MAAMC,MAAM,CAAC;EAIhBC,WAAWA,CAACC,aAAuB,EAAEC,SAAiB,EAAE;IAAAC,eAAA;IAAAA,eAAA;IAcxD;AACJ;AACA;IAFIA,eAAA,gBAGQ,CAACC,OAAe,EAAE,GAAGC,IAAW,KACpC,IAAI,CAACC,IAAI,CAACR,QAAQ,CAACD,KAAK,EAAEO,OAAO,EAAEC,IAAI,CAAC;IAE5C;AACJ;AACA;IAFIF,eAAA,eAGO,CAACC,OAAe,EAAE,GAAGC,IAAW,KACnC,IAAI,CAACC,IAAI,CAACR,QAAQ,CAACS,IAAI,EAAEH,OAAO,EAAEC,IAAI,CAAC;IAE3C;AACJ;AACA;IAFIF,eAAA,eAGO,CAACC,OAAe,EAAE,GAAGC,IAAW,KACnC,IAAI,CAACC,IAAI,CAACR,QAAQ,CAACU,IAAI,EAAEJ,OAAO,EAAEC,IAAI,CAAC;IAE3C;AACJ;AACA;IAFIF,eAAA,gBAGQ,CAACC,OAAe,EAAE,GAAGC,IAAW,KACpC,IAAI,CAACC,IAAI,CAACR,QAAQ,CAACW,KAAK,EAAEL,OAAO,EAAEC,IAAI,CAAC;IAnCxC,IAAI,CAACK,cAAc,GAAGT,aAAa;IACnC,IAAI,CAACU,OAAO,GAAGd,KAAK,CAACK,SAAS,CAAC;EACnC;;EAEA;AACJ;AACA;EACI,OAAOU,OAAOA,CAACV,SAAiB,EAAU;IACtC;IACA,MAAMW,KAAK,GAAGf,QAAQ,CAACgB,IAAI;IAC3B,OAAO,IAAIf,MAAM,CAACc,KAAK,EAAEX,SAAS,CAAC;EACvC;EA0BA;AACJ;AACA;AACA;AACA;AACA;EACYI,IAAIA,CAACO,KAAe,EAAET,OAAe,EAAEC,IAAW,EAAE;IACxD;IACA,IAAI,IAAI,CAACK,cAAc,GAAGG,KAAK,EAAE;;IAEjC;IACA,MAAME,MAAM,GAAGC,MAAM,CAACC,IAAI,CAACnB,QAAQ,CAAC,CAACoB,MAAM,CACvC,CAACC,IAAI,EAAEC,IAAI,KACPP,KAAK,KAAKf,QAAQ,CAACsB,IAAI,CAA0B,GAAGA,IAAI,GAAGD,IAAI,EACnE,IACJ,CAAC;IAED,IAAI,CAACR,OAAO,CAAE,IAAGI,MAAO,KAAIX,OAAQ,EAAC,EAAE,GAAGC,IAAI,CAAC;EACnD;AACJ;;AAEA;AACA;AACA;AACA,OAAO,MAAMgB,GAAG,GAAGtB,MAAM,CAACa,OAAO,CAAC,MAAM,CAAC;;AAEzC;AACA;AACA;AACA,OAAO,MAAMU,OAAO,GAAGvB,MAAM,CAACa,OAAO,CAAC,MAAM,CAAC;;AAE7C;AACA;AACA;AACA,OAAO,MAAMW,SAAS,GAAGxB,MAAM,CAACa,OAAO,CAAC,QAAQ,CAAC"}